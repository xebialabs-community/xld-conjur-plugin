- !policy
  id: vms
  body:
    - &variables
      - !variable host/dev/local_vm/username
      - !variable host/dev/local_vm/password

    - !group ops

    - !permit
      resource: *variables
      privileges: [ read, execute ]
      roles: !group ops

- !policy
  id: myapp
  body:
    - !layer
      annotations:
        description: Sample

- !host local-vm

- !grant
  role: !group vms/ops
  member: !layer myapp

- !grant
  role: !layer myapp
  member: !host local-vm




- !group &ops ops
- !group &managers managers

- !host &localvm
  id: local-vm
  owner: *ops

- !variable &hostusername
  id: host/local-vm/username
  owner: *ops
  annotations:
    app: SimpleApp

- !variable &hostpassword
  id: host/local-vm/password
  owner: *ops
  annotations:
    app: SimpleApp

- !permit
  role: *managers
  privileges: [ read, execute, update ]
  resource: 
    - *hostusername
    - *hostpassword

- !permit
  role: *ops
  privileges: [ execute ]
  resource: 
    - *hostusername
    - *hostpassword
